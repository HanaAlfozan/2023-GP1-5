{% load static %}
{% block brand %}
{% csrf_token %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Responsive Bootstrap4 Shop Template, Created by Imran Hossain from https://imransdesign.com/">

	<!-- title -->
	<title>Log In</title>

	<link rel="shortcut icon" type="image/png" href="{% static 'img/Games/GGicon.png' %}">
	<!-- google font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
	<!-- fontawesome -->
	<link rel="stylesheet" href="{% static 'css/all.min.css' %}">
	<!-- bootstrap -->
	<link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
	<!-- owl carousel -->
	<link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}">
	<!-- magnific popup -->
	<link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
	<!-- animate css -->
	<link rel="stylesheet" href="{% static 'css/animate.css' %}">
	<!-- mean menu css -->
	<link rel="stylesheet" href="{% static 'css/meanmenu.min.css' %}">
	<!-- main style -->
	<link rel="stylesheet" href="{% static 'css/main.css' %}">
	<!-- responsive -->
	<link rel="stylesheet" href="{% static 'css/responsive.css' %}">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<style>
		.games{
			color: #fff;
		}
		.innerList{
			padding-left: 40px;
            padding-bottom: 19px;
		}
		ul{
           list-style: none;
		}
		#footer{
			justify-content: space-between;
		}
		summary::-webkit-details-marker {
          display: none;}

		  summary {
    list-style-type: none; /* For non-Chrome browsers */}
.hero-area{

background: rgb(21,22,51);
background: linear-gradient(96deg, rgba(21,22,51,1) 0%, rgba(226,42,162,1) 86%);

  z-index: 1;
		}


		.form-container form {
    background-color: rgba(255, 255, 255, 0.7);
    border-radius: 50px;
	padding-top: 25px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    text-align: center;
    width: 55%;
	margin-left: 200px;

}

.form-container {
     background-color: transparent;
     margin:  auto ; /* Adjust vertical margin */

}



.input-box {
    width: 60%;
    padding: 10px; /* Reduce padding for inputs */
 box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    border: none;
    border-radius: 25px;
    background-color: rgba(255, 255, 255, 0.7);
}

.input-box:focus {
    border: 2px solid #ff069a;
}


.alt-link {
    color: #ff069a;
    text-decoration: none;
}

.input-pair {
    margin-bottom: 30px;
}

.input-pair label {
    flex: 0 0 20%; /* Adjust label width as needed */
    font-weight: 700;
    text-align:left;
	font-size: 17px;
	margin-left: 10px;
}

.input-pair input {
	margin-left: 10px;
}


.animate-charcter {
  text-transform: uppercase;
  background-image: linear-gradient(
     -225deg,
    #2ae2e1 0%,
	#ff069a 29%,
    #06f7ff 67%,
    #fff 100%
  );
  background-size: auto auto;
  background-clip: border-box;
  background-size: 200% auto;
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;

  font-size: 50px;
  letter-spacing: 10px;
  line-height: 1.5;
}

@keyframes textclip {
  to {
    background-position: 200% center;
  }
}


@keyframes textclip {
  to {
    background-position: 200% center;
  }
}

#forgetPass{
			font-family: 'Poppins', sans-serif;
            color: #333;
			font-weight: 700;
			margin-left: 220px;
			font-size: 12px;
			cursor: pointer;
			position: relative;
            top: 10px;
		}
	#forgetPass:hover {
         color: #06f7ff;
		}
		.input-item {
		 position: relative;
         background: transparent;
         color: #333;
         right: -6px;
		 font-size: 18px;
		}
				.site-logo img{
  width: 200px;
    height: 100px;
	position: relative;
	left: -25px;
}
body img{
  max-width: 600px;
}

.popup {
  display: none;
  position: fixed;
  top: 0;
  left: 50;
  width: 100%;
  height: 100%;
}

.popup-content {
  background-color: #fff;
  max-width: 600px;
  margin: 15% auto;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  position: relative;
}

.close {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 40px;
  cursor: pointer;
}

.close:hover {
  color: red;
}

#resetPassword , #setNewPassword{
  background-color: #06f7ff;
  color: white;
  border: none;
  padding: 10px 20px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  font-weight: 1000;
  margin: 10px 0;
  cursor: pointer;
  border-radius: 50px;
}

#resetPassword:hover , #setNewPassword:hover {
  background-color: #ff069a;
}

.Success .popup-content{
	padding: 50px;
}

.fail .popup-content{
	padding: 70px;
}

.right {
  position: relative;
  left: 250px;
  top:-160px
}

.left{
  position: relative;
  left: -370px;
  top: 200px;

}



	</style>

</head>
<body>

	<!--PreLoader-->
    <div class="loader" id="loader">
        <div class="loader-inner">
            <div class="circle"></div>
        </div>
    </div>
    <!--PreLoader Ends-->

	<!-- header -->
	<div class="top-header-area" id="sticker">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-sm-12 text-center">
					<div class="main-menu-wrap">
						<!-- logo -->
						<div class="site-logo">
							<a href="{% url 'index' %}">	<img src="{% static 'img/Games/GameGeek.png' %}" alt="logo" width="300px" height="120px">
							</a>
						</div>

						<!-- menu start -->
						<nav class="main-menu">
							<ul>

								<li>
									<div class="header-icons">


									</div>
								</li>
							</ul>
						</nav>
						<!-- menu end -->
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end header -->
	<div class="hero-area hero-bg" style="background-size: 120%;">
		<div class="container">
			<div class="row">
				<div class="col-lg-9 offset-lg-2 text-center">
					<div class="hero-text">
						<div class="hero-text-tablecell">



	<div class="contact-from-section mt-150 mb-150">

		<div class="container">
			<div class="left">
				<h3 class="animate-charcter">Welcome back, gamer ðŸŽ®!</h3>
				<p style="color: #fff; letter-spacing: 1px; padding: 10px;  margin: 0; max-width: 550px; margin-left: 130px; font-size: 20px;" ALIGN=LEFT><b> More adventures awaits behind these login gates. Ready to get started? ðŸš€</b></p>
			</div>
			<div class="right">
				<div class="containeTitle" style="margin-left: 200px;">
					<div class="rowTitle">
								  <div class="col-md-12 text-center">
									<h3 class="animate-charcter" style="font-size: 40px;">Log In</h3>
								  </div>
								</div>
							  </div>

							  <div class="form-container">
								<form action="{% url 'LoginUser' %}" method="POST">
									{% csrf_token %}
									<div class="input-pair">
										<span class="input-item">
											<i class="fa fa-user-circle"></i>
										</span>
										<label for="username">Username:</label>
										<input type="text" id="username" class="input-box" name="Username" required placeholder="Enter your username">
									</div>
									<div class="input-pair">
										<span class="input-item">
											<i class="fa fa-key"></i>
										</span>
										<label for="password">Password:</label>
										<input type="password" id="pass" class="input-box" name="Password" required placeholder="Enter your password">
										<i class="fa fa-eye-slash togglePassword" style="font-size: 20px; position: absolute; right: 129px; top: 188px; cursor: pointer;"></i>
										<a href="#" id="forgetPass">Forgot Password?</a>
										<br><br>
									</div>
									<!-- Display messages only if there are any -->
									{% if messages %}
										{% for message in messages %}
											<h5>{{ message }}</h5>
										{% endfor %}
									{% endif %}
									<input type="submit" id="LogIN" value="Log In" style="width: 80%;">
									<br><br><label>New to Game Geek? <a href="{% url 'signup' %}" class="alt-link">Sign Up</a></label>
								</form>
							</div>
			</div>
<!-- Password Reset Pop-up -->
<div id="passwordResetPopup" class="popup">
    <div class="popup-content">
        <span class="close" id="closePopup">&times;</span>
        <h3>Password Reset</h3>
        <h6>Enter your username to reset your password using your registered email:</h6>
        <form id="passwordResetForm" action="{% url 'custom_password_reset' %}" method="POST">
            {% csrf_token %}
            <div class="input-pair">
                <label for="username" style="margin-left: 10px;">Username:</label>
                <input type="username" id="Username" class="input-box" name="Username" required placeholder="Enter your username" style="margin-left: 10px;">
            </div>
            <button type="button" id="resetPassword">Reset Password</button>
        </form>
    </div>
</div>
<!-- Password Reset failed Pop-up (hidden by default) -->
			<div class="popup fail" id="errorPopup">
				<div class="popup-content">
					<span class="close" id="closeErrorPopup">&times;</span>
					<h3 class="error">Username not found  &nbsp;<i class="fa fa-close" aria-hidden="true" style="color: red;"></i></h3>
					<h5>Make sure you entered the correct username registered with Game Geek. If the issue persists, don't hesitate to contact us for assistance!</h5>
				</div>
			</div>

<!-- Password sent Success Pop-up (hidden by default) -->
<div id="EmailSentSuccess" class="popup Success">
    <div class="popup-content">
        <span class="close" id="closePopupSuccess">&times;</span>
        <h3>Password Reset Link Sent &nbsp;<i class="fa fa-check" aria-hidden="true" style="color: green;"></i></h3>
        <h5>A password reset link has been sent to your registred email address. Please check your inbox, including your spam folder, and follow the link to reset your password.</h5>
		<h7>If you haven't received an email, please ensure that you entered the correct email address registered with Game Geek. If the issue persists, don't hesitate to contact us for assistance!</h7>
    </div>
</div>
<!-- Password Confirm Success Pop-up (hidden by default) -->
<div id="passwordResetConfirm" class="popup">
    <div class="popup-content">
        <span class="close" id="closePopupConfirm">&times;</span>
        <h3 style="padding-bottom: 20px;">Set New Password</h3>
        <h5 Align="left" style="margin-left: 20px; margin-bottom: 30px;">Enter your new password:</h5>
        <form id="passwordResetConfirmForm" action="" method="POST">
            {% csrf_token %}
            <div class="input-pair">
                <label for="password">New Password:</label>
				<input type="password" id="password" class="input-box" name="password" required placeholder="Enter your password" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$"
				title="Password must be at least 8 characters, contain at least one number, one lowercase letter, and one uppercase letter.">
				<i class="fa fa-eye-slash togglePassword" style="font-size: 20px; position: absolute; top:145px; right: 80px; cursor: pointer;"></i></div>
            <div class="input-pair">
                <label for="password2">Confirm Password:</label>
                <input type="password" id="password2" class="input-box" name="password2" required placeholder="Confirm your new password">
				<i class="fa fa-eye-slash togglePassword" style="font-size: 20px; position: absolute; right: 80px; top: 230px; cursor: pointer;"></i>
            </div>
			{% if messages %}
			{% for message in messages %}
				<h5>{{ message }}</h5>
			{% endfor %}
		{% endif %}
            <button type="submit" id="setNewPassword">Set New Password</button>
        </form>
    </div>
</div>
<!-- Password reset Success Pop-up (hidden by default) -->
<div id="passwordResetComplete" class="popup">
    <div class="popup-content Complete" style="padding: 70px;">
        <span class="close" id="closePopupComplete">&times;</span>
        <h3><i class="fa fa-check" aria-hidden="true" style="color: green; font-size: 25px;"></i><br><br>Password has been successfully reset!</h3>
    </div>
</div>

<script>
    var status = "{{ status }}";
    if (status === 'confirm') {
        // Display passwordResetConfirm pop-up
        document.getElementById('passwordResetConfirm').style.display = 'block';
        document.getElementById('EmailSentSuccess').style.display = 'none';
        document.getElementById('passwordResetComplete').style.display = 'none';
    } 
	else if (status === 'error'){
		// Display error pop-up
        document.getElementById('passwordResetPopup').style.display = 'none';
        document.getElementById('EmailSentSuccess').style.display = 'none';
        document.getElementById('passwordResetConfirm').style.display = 'none';
        document.getElementById('passwordResetComplete').style.display = 'none';
        document.getElementById('errorPopup').style.display = 'block';
	}
	else if(status === 'reset'){
			// Display reset pop-up
		document.getElementById('passwordResetPopup').style.display = 'none';
        document.getElementById('EmailSentSuccess').style.display = 'none';
        document.getElementById('passwordResetConfirm').style.display = 'none';
        document.getElementById('passwordResetComplete').style.display = 'block';
        document.getElementById('errorPopup').style.display = 'none';

		    // Close the passwordResetComplete popup after 8 seconds
		setTimeout(function () {
                document.getElementById('passwordResetComplete').style.display = 'none';
            }, 10000);
	}
	
    document.getElementById('resetPassword').addEventListener('click', function () {
		document.getElementById('loader').style.display = 'block';
        username = document.getElementById('Username').value;
        
        // Get the CSRF token from the cookie
        var csrftoken = getCookie('csrftoken');

        var xhr = new XMLHttpRequest();
        xhr.open('POST', "{% url 'custom_password_reset' %}", true);
        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

        // Set the CSRF token in the request headers
        xhr.setRequestHeader("X-CSRFToken", csrftoken);

		xhr.onload = function () {
    if (xhr.status === 200) {
        // Password reset was successful, display the success pop-up
		document.getElementById('loader').style.display = 'none';
        document.getElementById('EmailSentSuccess').style.display = 'block';
        document.getElementById('passwordResetPopup').style.display = 'none';
    } else if (xhr.status === 404) {
        // Email not found, display the error pop-up
        document.getElementById('passwordResetPopup').style.display = 'none';
        document.getElementById('errorPopup').style.display = 'block';
    }
};

        xhr.send('username=' + username);
    });

    // Function to get the CSRF token from the cookie
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
</script>

<script>
    document.querySelectorAll('.togglePassword').forEach(function(icon) {
        icon.addEventListener('click', function() {
            var passwordInput = document.getElementById(this.previousElementSibling.id);
            var type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.classList.toggle('fa-eye-slash');
            this.classList.toggle('fa-eye');
        });
    });
</script>



											  
							
</div>
	</div>
		</div>
						</div>
					</div>
				</div>
			</div>
		</div>


	<!-- footer -->
	<div class="footer-area">
		<div class="container">
			<div class="row" id="footer">
				<div class="col-lg-3 col-md-6">
					<div class="footer-box about-widget">
						<h2 class="widget-title">Our Guarantee</h2>
						<p>At Game Geek, we combine entertainment along with safeguarding. We're committed to enhancing the game-finding experience by expertly tailoring it to your age and preferences as a cutting-edge platform.</p>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box get-in-touch">
						<h2 class="widget-title">Get in Touch</h2>
						<ul>
							<li><a href="mailto:support@gamegeek.com" class="mail">
								<i class="fas fa-envelope"></i>&#160;&#160;GameGeekWebsite@gmail.com
							</a></li>
							<li>
								<a href="https://www.instagram.com/Game_Geek2023" target="_blank">
								  <i class="fab fa-instagram"></i>&#160;&#160; Game_Geek2023
								</a>
							</li>
							<li>
								<a href="https://www.X.com/Game_Geek2023" target="_blank">
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" version="1.1" width="13" height="13" class="X">
									<path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" fill="white"/>
									</svg>&#160;&#160; <span style="position: relative; top: 2px;">Game_Geek2023</span>
								</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6">
					<div class="footer-box pages">
						<h2 class="widget-title">Pages</h2>
						<ul class= "outerList">
							<details><summary><li class="gmaes">Games</li></summary>
								<ul class="innerList">
									<li class="dash"><a href="{% url 'index' %}">All Games</a></li>
									<li class="dash"><a href="{% url 'index' %}">Favourite Games</a></li>
									<li class="dash"><a href="{% url 'index' %}">Downloaded Games</a></li>
								</ul></details>
							<li class="dash"><a href="{% url 'index' %}">Profile</a></li>
							<li class="dash"><a href="{% url 'index' %}">Contact Us</a></li>
							<li class="dash"><a href="{% url 'index' %}">About Us</a></li>
						</ul>

					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end footer -->

	<!-- copyright -->
	<div class="copyright">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 col-md-12">
					<p>Copyrights &copy; 2023 GameGeek Rights Reserved.<br>
					</p>
				</div>
			</div>
		</div>
	</div>
	<!-- end copyright -->
<!-- JavaScript to handle the close buttons and pop-ups -->
<!-- JavaScript to handle the pop-ups -->
<script>
    document.getElementById("forgetPass").addEventListener("click", function() {
        var popup = document.getElementById("passwordResetPopup");
        popup.style.display = "block";
    });

    document.getElementById("closePopup").addEventListener("click", function() {
        var popup = document.getElementById("passwordResetPopup");
        popup.style.display = "none";
    });

    document.getElementById("closePopupSuccess").addEventListener("click", function() {
        var successPopup = document.getElementById("EmailSentSuccess");
        successPopup.style.display = "none";
    });

    document.getElementById("closeErrorPopup").addEventListener("click", function() {
        var successPopup = document.getElementById("errorPopup");
        successPopup.style.display = "none";
    });

    document.getElementById("closePopupConfirm").addEventListener("click", function() {
        var successPopup = document.getElementById("passwordResetConfirm");
        successPopup.style.display = "none";
    });

    document.getElementById("closePopupComplete").addEventListener("click", function() {
        var successPopup = document.getElementById("passwordResetComplete");
        successPopup.style.display = "none";
    });

    // Close the pop-up when clicking outside the content
    window.onclick = function(event) {
        var popup = document.getElementById("passwordResetPopup");
        var successPopup = document.getElementById("EmailSentSuccess");
        if (event.target === popup || event.target === successPopup) {
            popup.style.display = "none";
            successPopup.style.display = "none";
        }
    };
</script>

	  

	<!-- jquery -->
	<script src="{% static 'js/jquery-1.11.3.min.js' %}"></script>
	<!-- bootstrap -->
	<script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
	<!-- count down -->
	<script src="{% static '/js/jquery.countdown.js' %}"></script>
	<!-- isotope -->
	<script src="{% static '/js/jquery.isotope-3.0.6.min.js' %}"></script>
	<!-- waypoints -->
	<script src="{% static '/js/waypoints.js' %}"></script>
	<!-- owl carousel -->
	<script src="{% static '/js/owl.carousel.min.js' %}"></script>
	<!-- magnific popup -->
	<script src="{% static '/js/jquery.magnific-popup.min.js' %}"></script>
	<!-- mean menu -->
	<script src="{% static '/js/jquery.meanmenu.min.js' %}"></script>
	<!-- sticker js -->
	<script src="{% static '/js/jquery.sticker.js' %}"></script>
	<!-- form validation js -->
	<script src="{% static '/js/form-validate.js' %}"></script>
	<!-- main js -->
	<script src="{% static '/js/main.js' %}"></script>

</body>

{% endblock %}
</html>
